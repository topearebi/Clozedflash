<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlashDeck v3</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="app-container">
        
        <header>
            <div class="brand">
                <h1>FlashDeck <span class="version">v3</span></h1>
            </div>
            <div class="header-controls">
                <div class="currency-display">⚡ <span id="credit-count">0</span></div>
                <button id="btn-settings" class="icon-btn">⚙️</button>
            </div>
        </header>

        <section id="view-dashboard" class="active-view">
            <div class="stats-box">
                <h2 id="status-heading">Due Today</h2>
                <div class="big-number" id="due-count">0</div>
                
                <div class="action-row">
                    <button id="btn-action-main" class="primary-btn">Review Now</button> 
                    <button id="btn-game" class="secondary-btn game-btn">Speed Round <span class="cost-tag">+Earn</span></button>
                </div>
            </div>
            
            <div class="list-header">
                <h3>My Collection</h3>
                <span id="total-count">0 cards</span>
            </div>
            
            <div id="card-list" class="scroll-list">
                </div>

            <button id="btn-add-view" class="fab">+</button>
        </section>

        <section id="view-add" class="hidden-view">
            <div class="nav-bar">
                <button class="back-btn">← Back</button>
                <div class="nav-actions">
                    <button id="btn-open-import" class="text-btn" style="font-size:0.9rem">Bulk Import</button>
                </div>
            </div>
            <h2 id="add-title" style="margin-top:0">New Card</h2>

            <div class="toggle-container">
                <button id="type-vocab" class="toggle-btn active">Word / Char</button>
                <button id="type-sentence" class="toggle-btn">Sentence</button>
            </div>

            <form id="add-form">
                <div class="input-group">
                    <label>Language / Tag (Optional)</label>
                    <input type="text" id="input-tag" placeholder="e.g. French, Mandarin, HSK1" list="tag-list">
                    <datalist id="tag-list"></datalist>
                </div>

                <div class="input-group">
                    <label>Target (Front)</label>
                    <textarea id="input-target" placeholder="e.g. 猫 or Gato" required></textarea>
                </div>
                
                <div class="input-group">
                    <label id="label-meta">Notes (Optional)</label>
                    <input type="text" id="input-meta" placeholder="e.g. māo or Masculine">
                </div>
                
                <div class="input-group">
                    <label>Native Meaning (Back)</label>
                    <textarea id="input-native" placeholder="e.g. Cat" required></textarea>
                </div>

                <button type="submit" class="primary-btn">Save Card</button>
            </form>
        </section>

        <div id="modal-import" class="modal hidden">
            <div class="modal-content">
                <h3>Bulk Import</h3>
                <p class="small-text">Paste from Excel (Tab) or CSV.</p>
                <input type="text" id="input-bulk-tag" placeholder="Apply Tag to all (e.g. Spanish)" style="margin-bottom:5px;">
                <textarea id="input-bulk" placeholder="Target	Pinyin	Native"></textarea>
                <div class="modal-actions">
                    <button id="btn-cancel-import" class="secondary-btn">Cancel</button>
                    <button id="btn-run-import" class="primary-btn">Import Cards</button>
                </div>
            </div>
        </div>

        <div id="modal-cram-settings" class="modal hidden">
            <div class="modal-content">
                <h3>Configure Session</h3>
                <p class="small-text">Cost: <span style="color:#e17055; font-weight:bold;">50 ⚡</span></p>
                
                <label style="display:block; margin-top:10px; font-weight:bold;">Filter by Tag:</label>
                <select id="cram-tag-select" style="width:100%; padding:8px; margin-bottom:15px;">
                    <option value="ALL">All Tags</option>
                </select>

                <label style="display:block; font-weight:bold;">Card Type:</label>
                <div class="toggle-container" style="margin-bottom:20px;">
                    <button id="cram-type-mix" class="toggle-btn active">Mix</button>
                    <button id="cram-type-vocab" class="toggle-btn">Words</button>
                    <button id="cram-type-sentence" class="toggle-btn">Sentences</button>
                </div>

                <div class="modal-actions">
                    <button id="btn-cancel-cram" class="secondary-btn">Cancel</button>
                    <button id="btn-start-cram" class="primary-btn cram-btn">Start Cramming</button>
                </div>
            </div>
        </div>

        <section id="view-review" class="hidden-view">
            <div class="review-header">
                <button id="btn-quit-review" class="text-btn">Quit</button>
                <span id="mode-indicator" class="tag">Review</span>
                <span id="progress-text">1 / 10</span>
            </div>

            <div class="card-area">
                <div id="review-tag-badge" class="tag-badge hidden">TAG</div>

                <div id="card-question">
                    <span class="hint-text" id="review-hint-label">Translate this:</span>
                    <h3 id="review-main-text">...</h3>
                    <button id="btn-show-hint" class="text-btn hidden">Show Hint</button>
                    <p id="review-sub-text" class="hidden">...</p>
                </div>

                <div id="cloze-input-area" class="hidden">
                    <input type="text" id="cloze-answer" placeholder="Type missing part..." autocomplete="off">
                    <button id="btn-check-cloze" class="secondary-btn">Check</button>
                </div>

                <div id="card-answer" class="hidden">
                    <div class="divider"></div>
                    <div class="answer-box">
                        <h3 id="review-answer-target">...</h3>
                        <p id="review-answer-meta" class="meta-text">...</p>
                        <p id="review-answer-native">...</p>
                    </div>
                    <div class="rating-buttons">
                        <button class="rate-btn" data-rating="0" style="background:#ff6b6b">Again</button>
                        <button class="rate-btn" data-rating="1" style="background:#feca57">Hard</button>
                        <button class="rate-btn" data-rating="2" style="background:#1dd1a1">Good</button>
                        <button class="rate-btn" data-rating="3" style="background:#54a0ff">Easy</button>
                    </div>
                </div>
            </div>
        </section>

        <section id="view-game" class="hidden-view">
            <div class="review-header">
                <button id="btn-quit-game" class="text-btn">Quit</button>
                <span id="game-status" style="font-weight:bold; color: #6c5ce7;">Round 1</span>
            </div>
            <div class="game-area">
                <div id="game-tag-badge" class="tag-badge hidden">TAG</div>

                <div id="game-card-content" class="game-card"></div>
                <div id="game-input-area" class="hidden">
                    <input type="text" id="game-input" placeholder="Type meaning..." autocomplete="off">
                    <div class="game-actions">
                        <button id="btn-game-submit" class="secondary-btn">Submit</button>
                        <button id="btn-game-override" class="text-btn hidden">I was right (Override)</button>
                    </div>
                </div>
            </div>
        </section>

        <section id="view-settings" class="hidden-view">
            <div class="nav-bar">
                <button class="back-btn">← Back</button>
                <h2>Settings</h2>
            </div>
            <div class="settings-content">
                <button id="btn-download" class="secondary-btn">Backup Data (JSON)</button>
                <label class="file-upload">
                    Restore Data
                    <input type="file" id="file-upload">
                </label>
                <hr>
                <button id="btn-clear" class="danger-btn">Clear All Data</button>
            </div>
        </section>

    </div>
    <script src="script.js"></script>
</body>
</html>
